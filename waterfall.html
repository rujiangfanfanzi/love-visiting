<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/waterfall.css">
    <script type="text/javascript" src='js/jquery-1.8.3.min.js'></script>
    <script type="text/javascript" src='js/waterfall-3.11.min.js'></script>
    <script type="text/javascript" src='js/template-native.js'></script>
</head>
<body>
    <div class="top">
    <a href="#" class="border-a">客户端</a>
    <a href="#" class="border-a">手机版</a>
    <a href="#">收集工具</a>
    <a href="#" class="four">注册</a>
    <a href="#">登录</a>
    <a href="#" class="email"></a>
    <a href="#" class="tel"></a>
    <a href="#"><img src="images/upload/photos/admin.jpg" alt=""></a>
    <a href="#"><span>吾爱旅行</span></a>
</div>

    <div class="nav">
    <img src="images/logo.png" alt="">
    <ul>
        <li><a href="#" class="bian"><span class="big">广播</span></a></li>
        <li><a href="#" class="bian"><span class="big">发现</span><span class="small">文章&nbsp;心情</span></a></li>
        <li><a href="#" class="bian"><span class="big">专辑</span><span class="small">生活&nbsp;时尚&nbsp;兴趣</span></a></li>
        <li><a href="#" class="bian"><span class="big">Wiki</span></a></li>
        <li><a href="#" class="bian"><span class="big">小组</span></a></li>
    </ul>
        <div class="search">
            <input type="text" id="inp">
            <div class="tubiao"></div>
        </div>
        <ul id="ul1"></ul>
</div>

    <div class="wrap">
        <div class="box">

            <div class='inner'>
                <div class="mask"></div>
                <img src="images/upload/img1.jpg" alt="">
                <p>人们往往用至诚的外表和虔诚的行动，掩饰一颗魔鬼般的内心。——莎士比亚《哈姆雷特》</p>
            </div>

            <div class='inner'>
                <img src="images/upload/img17.jpg" alt="">
                <p>你不会遇见第二个我。要懂得，有些人一旦失去了就不会回来，就像没有人会永远站在原地等谁。</p>
            </div>

            <div class='inner'>
                <img src="images/upload/log4.jpg" alt="">
                <p>很多事犹如天气，慢慢热或者渐渐冷，等到惊悟，已过了一季。</p>
            </div>
            <div class='inner'>
                <img src="images/upload/img2.jpg" alt="">
                <p> 每一个人在世界上都要受挫折，有许多人反而在折断的地方长得最结实。</p>
            </div>
            <div class='inner'>
                <img src="images/upload/img3.jpg" alt="">
                <p>我们都曾经以为，有些事情是不可以放手的。时日渐远，当你回望你会发现，你曾经以为不可以放手的东西，只是生命瞬间的一块跳板。你跳过了，就可以变得更精彩。</p>
            </div>
            <div class='inner'>
                <img src="images/upload/log1.jpg" alt="">
                <p> 最美丽的女人不是她自身，而是她营造的美丽氛围。——严歌苓《无出路咖啡馆》</p>
            </div>
            <div class='inner'>
                <img src="images/upload/img5.jpg" alt="">
                <p>真的没什么好悲伤，也许明天就忘，如同花朵向阳，多汲取一点光，贮存的能量，终有一天会释放。</p>
            </div>
            <div class='inner'>
                <img src="images/upload/img6.jpg" alt="">
                <p>最好的朋友，就是当所有人都觉得我小题大做的时候，她懂得我为什么哭得如此歇斯里底。</p>
            </div>
            <div class='inner'>
                <img src="images/upload/img7.jpg" alt="">
                <p> 我等待一份牵手的爱情，可以相携到老而永远不会说再见的爱情。我等待一份牵手的爱情，可以不必为了谁更爱谁而争吵的爱情。</p>
            </div>

            <div class='inner'>
                <img src="images/upload/log2.jpg" alt="">
                <p>我等待一份牵手的爱情，可以不在乎我们彼此究竟有多少财富的爱情。我渴望一份可以牵手的爱情，不求轰轰烈烈但求一生相伴。</p>
            </div>
            <div class='inner'>
                <img src="images/upload/img8.jpg" alt="">
                <p>我想马上去见你。因为短信听不到声音，电话看不到表情。</p>
            </div>
            <div class='inner'>
                <img src="images/upload/img17.jpg" alt="">
                <p>你不会遇见第二个我。要懂得，有些人一旦失去了就不会回来，就像没有人会永远站在原地等谁。</p>
            </div>

            <div class='inner'>
                <img src="images/upload/log4.jpg" alt="">
                <p>很多事犹如天气，慢慢热或者渐渐冷，等到惊悟，已过了一季。</p>
            </div>
            <div class='inner'>
                <img src="images/upload/img5.jpg" alt="">
                <p>真的没什么好悲伤，也许明天就忘，如同花朵向阳，多汲取一点光，贮存的能量，终有一天会释放。</p>
            </div>
            <div class='inner'>
                <img src="images/upload/img6.jpg" alt="">
                <p>最好的朋友，就是当所有人都觉得我小题大做的时候，她懂得我为什么哭得如此歇斯里底。</p>
            </div>

        </div>
        <div class="tips" onclick="getData()">加载更多...</div>
    </div>
    </div>

    <script>
        //---------------------------------百度接口----------------------------------
        function maiov(data) {
            var oUl = document.getElementById('ul1');
            var html = '';
            if (data.s.length) {
                oUl.style.display = 'block';
                for (var i=0; i<data.s.length; i++) {
                    html += '<li><a target="_blank" href="http://www.baidu.com/s?wd='+data.s[i]+'">'+ data.s[i] +'</a></li>';
                }
                oUl.innerHTML = html;
            } else {
                oUl.style.display = 'none';
            }
        }
        var oinp = document.getElementById('inp');
        var oUl = document.getElementById('ul1');
        oinp.onkeyup = function() {
            if ( this.value != '' ) {
                var oScript = document.createElement('script');
                oScript.src = 'http://suggestion.baidu.com/su?wd='+this.value+'&cb=maiov';
                document.body.appendChild(oScript);
            } else {
                oUl.style.display = 'none';
            }
        }


    </script>

    <!-- 定义的模板 -->
    <script id='template' type='text/html'>
        <% for(var i=0;i<items.length;i++){%>
        <div class='inner'>
            <img src="<%=items[i].path%>" alt="">
            <p><%=items[i].text%></p>
        </div>
        <%}%>
    </script>

    <script>
        $('.box').waterfall('.inner');//---瀑布流

        function getData(){
            $.ajax({
                url:'waterfall.php',
                dataType:'json',
                success:function(data){
                    console.log(data);
                    //---data用来渲染模板
                    var html = template('template',data);
                    $('.box').append(html);

                    $('.box').waterfall('.inner');//---加载出来的图片也要执行瀑布流
                }
            });
        }
    </script>

    <script>
        var imgs = document.getElementsByTagName('img');
        var num = imgs.length;
        var n = 0;//储存图片加载到的位置，避免每笔都从第一张图片开始遍历
        function lazyload(){
            //---可视区的高度
            var seeHeight = document.documentElement.clientHeight;
            //---滚动的距离
            var scrollTop = document.documentElement.scrollTop||document.body.scrollTop;
            for(var i=n;i<num;i++){//---遍历图片
                if(imgs[i].offsetTop<seeHeight+scrollTop){//---图片正好在可视区
                    if(imgs[i].getAttribute('src')=='images/loading.gif'){
                        imgs[i].src = imgs[i].getAttribute('data-original');
                    }
                    n = i+1;
                }
            }
        };
        lazyload();
        window.onscroll = function(){
            lazyload();
        }
    </script>

</body>
</html>